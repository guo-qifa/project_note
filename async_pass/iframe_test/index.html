<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>

<body>
  <h1>test</h1>
  <div style="height: 500px;" id ="container">
    <!-- <iframe id="iframe1" src="test.html" frameborder="0" height="100%"></iframe> -->
  </div>
  <script>
    // var iframe = document.getElementById("iframe1");
    // var iwindow = iframe.contentWindow;
    // var idoc = iwindow.document;
    // console.log("window", iwindow);//获取iframe的window对象
    // console.log("document", idoc);  //获取iframe的document
    // console.log("html", idoc.documentElement);//获取iframe的html
    // console.log("head", idoc.head);  //获取head
    // console.log("body", idoc.body);  //获取body
    // // 另外更简单的方式是，结合Name属性，通过window提供的frames获取
    // console.log(window.frames['iframe1'].window);
    // console.dir(document.getElementById("iframe1").contentWindow);
    var iframeCon = document.getElementById('container');
    
    var    text; //传递的信息
    console.log(document.createElement('iframe'));
    var iframe = document.createElement('iframe')
      iframe.id = "frame";
      iframe.style = "display:block;";
      iframe.name = "polling";
      iframe.src = "test.html";
    iframeCon.appendChild(iframe);
    iframe.onload = function () {
      var iloc = iframe.contentWindow.location;
      console.log(iloc);
      var   idoc = iframe.contentWindow;
      console.log(idoc);
      setTimeout(function () {
        text = idoc.getElementsByTagName('body')[0].textContent;
        console.log(text);
        iloc.reload(); //刷新页面,再次获取信息，并且会触发onload函数
      }, 2000);
    }

  </script>
</body>

</html>